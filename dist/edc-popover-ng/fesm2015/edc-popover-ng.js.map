{"version":3,"file":"edc-popover-ng.js.map","sources":["ng://edc-popover-ng/lib/config/popover-configuration-handler.ts","ng://edc-popover-ng/lib/help.service.ts","ng://edc-popover-ng/lib/help.constants.ts","ng://edc-popover-ng/lib/help.component.ts","ng://edc-popover-ng/lib/help.module.ts"],"sourcesContent":["\nexport abstract class PopoverConfigurationHandler {\n\n  abstract getPluginId(): string;\n\n  abstract getHelpPath(): string;\n\n  abstract getDocPath(): string;\n\n  abstract getIcon(): string;\n\n  abstract isAppendToBody(): boolean;\n\n}\n","import { Injectable } from '@angular/core';\nimport { EdcClient, Helper } from 'edc-client-js';\nimport { PopoverConfigurationHandler } from './config/popover-configuration-handler';\n\n@Injectable()\nexport class HelpService {\n\n  private edcClient: EdcClient;\n  private helpPath: string;\n\n  constructor(private configurationHandler: PopoverConfigurationHandler) {\n    this.helpPath = configurationHandler.getHelpPath();\n    // Edc-popover only uses contextual help, instantiate client with contextualOnly parameter set to true\n    this.edcClient = new EdcClient(configurationHandler.getDocPath(), '', configurationHandler.getPluginId(), true);\n  }\n\n  getHelp(primaryKey: string, subKey: string, pluginId?: string): Promise<Helper> {\n    return this.edcClient.getHelper(primaryKey, subKey, pluginId || this.configurationHandler.getPluginId());\n  }\n\n  getHelpPath(): string {\n    return this.helpPath;\n  }\n\n  getPluginId(): string {\n    return this.configurationHandler.getPluginId();\n  }\n\n  getIcon(): string {\n    return this.configurationHandler.getIcon() || 'fa-question-circle-o';\n  }\n\n  getContainer(): string {\n    return this.configurationHandler.isAppendToBody() ? 'body' : '';\n  }\n}\n","export class HelpConstants {\n  public static readonly MESSAGE_COMING_SOON = 'Contextual help is coming soon.';\n}\n","import { Component, OnInit, Input, ViewChild, TemplateRef } from '@angular/core';\nimport { Helper, Link } from 'edc-client-js';\nimport { HelpService } from './help.service';\nimport { HelpConstants } from './help.constants';\nimport { PopoverDirective } from 'ngx-bootstrap';\n\n@Component({\n  selector: 'edc-help',\n  styleUrls: [ 'help.less' ],\n  template: `\n    <!-- Popover template -->\n    <ng-template #popTemplate>\n      <div class=\"edc-popover-container\" (click)=\"$event.stopPropagation()\">\n        <article class=\"popover-article\">{{ helper?.description }}</article>\n        <div class=\"see-also\">\n          <div *ngIf=\"helper?.articles.length\">\n            <h6><strong><span>Need more...</span></strong></h6>\n            <ul class=\"list-unstyled see-also-list\">\n              <li *ngFor=\"let article of helper.articles; let key = index\" class=\"see-also-item\"\n                  (click)=\"goToArticle(key)\">\n                <div class=\"article-link\">-{{article.label}}</div>\n              </li>\n            </ul>\n          </div>\n          <div *ngIf=\"helper?.links.length\">\n            <h6><strong><span>Related Topics</span></strong></h6>\n            <ul class=\"list-unstyled see-also-list\">\n              <li *ngFor=\"let link of helper.links\" class=\"see-also-item\" (click)=\"goToLink(link)\">\n                <div class=\"article-link\">-{{link.label}}</div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n\n\n    <!-- app-help template -->\n    <i class=\"fa help-icon {{ iconCss }}\"\n    [popover]=\"helper ? popTemplate : comingSoon\"\n    [popoverTitle]=\"helper?.label\"\n    [placement]=\"getPlacement()\"\n    [ngClass]=\"{'on-dark': dark }\"\n    [container]=\"container\"\n    [outsideClick]=\"true\"\n    (click)=\"cancelClick($event)\">\n    </i>\n  `\n})\nexport class HelpComponent implements OnInit {\n  helper: Helper;\n  container: string;\n  iconCss: string;\n  comingSoon = HelpConstants.MESSAGE_COMING_SOON;\n\n  @Input() pluginId: string; // if defined, the plugin identifier to use for fetching help content\n  @Input() key: string;\n  @Input() subKey: string;\n  @Input() placement = 'bottom';\n  @Input() dark: boolean;\n\n  constructor(private helpService: HelpService) {}\n\n  ngOnInit(): void {\n    if (this.key && this.subKey) {\n      setTimeout(() => { // set timeout because popover content loading is not top priority.\n        this.helpService.getHelp(this.key, this.subKey, this.pluginId)\n          .then((helper: Helper) => this.helper = helper,\n            (err) => console.warn('Contextual Help not found : ', err));\n      }, 2000);\n    }\n    this.iconCss = this.helpService.getIcon();\n    this.container = this.helpService.getContainer();\n  }\n\n  goToArticle(index: number): void {\n    const basePath = this.helpService.getHelpPath();\n    const pluginId = this.pluginId || this.helpService.getPluginId();\n    let url = `${basePath}/context/`;\n    if (pluginId) {\n      url += `${pluginId}/`;\n    } else {\n      console.warn('Please check if plugin Id was correctly set in the edc-popover-ng configuration handler');\n    }\n    url += `${this.key}/${this.subKey}/en/${index}`;\n    this.open(url);\n  }\n\n  goToLink(link: Link): void {\n    const basePath = this.helpService.getHelpPath();\n    const url = `${basePath}/doc/${link.id}`;\n    this.open(url);\n  }\n\n  getPlacement(): string {\n    return this.placement;\n  }\n\n  cancelClick($event: Event): void {\n    $event.preventDefault();\n  }\n\n  private open(url: string): void {\n    window.open(url, 'help', 'scrollbars=1,resizable=1,height=800,width=1200');\n  }\n}\n","import { NgModule, ModuleWithProviders, Provider } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { HelpComponent } from './help.component';\nimport { HelpService } from './help.service';\n\nexport interface HelpModuleConfig {\n  configLoader: Provider;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    PopoverModule.forRoot()\n  ],\n  declarations: [\n    HelpComponent\n  ],\n  providers: [\n    HelpService\n  ],\n  exports: [\n    HelpComponent\n  ],\n  entryComponents: [\n    HelpComponent\n  ]\n})\nexport class HelpModule {\n  static forRoot(config: HelpModuleConfig): ModuleWithProviders {\n    return {\n      ngModule: HelpModule,\n      providers: [\n        HelpService,\n        config.configLoader\n      ]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
