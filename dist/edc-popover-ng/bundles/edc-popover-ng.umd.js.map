{"version":3,"file":"edc-popover-ng.umd.js.map","sources":["ng://edc-popover-ng/lib/config/popover-configuration-handler.ts","ng://edc-popover-ng/lib/help.service.ts","ng://edc-popover-ng/lib/help.constants.ts","ng://edc-popover-ng/lib/help.component.ts","ng://edc-popover-ng/lib/help.module.ts"],"sourcesContent":["\nexport abstract class PopoverConfigurationHandler {\n\n  abstract getPluginId(): string;\n\n  abstract getHelpPath(): string;\n\n  abstract getDocPath(): string;\n\n  abstract getIcon(): string;\n\n  abstract isAppendToBody(): boolean;\n\n}\n","import { Injectable } from '@angular/core';\nimport { EdcClient, Helper } from 'edc-client-js';\nimport { PopoverConfigurationHandler } from './config/popover-configuration-handler';\n\n@Injectable()\nexport class HelpService {\n\n  private edcClient: EdcClient;\n  private helpPath: string;\n\n  constructor(private configurationHandler: PopoverConfigurationHandler) {\n    this.helpPath = configurationHandler.getHelpPath();\n    // Edc-popover only uses contextual help, instantiate client with contextualOnly parameter set to true\n    this.edcClient = new EdcClient(configurationHandler.getDocPath(), '', configurationHandler.getPluginId(), true);\n  }\n\n  getHelp(primaryKey: string, subKey: string, pluginId?: string): Promise<Helper> {\n    return this.edcClient.getHelper(primaryKey, subKey, pluginId || this.configurationHandler.getPluginId());\n  }\n\n  getHelpPath(): string {\n    return this.helpPath;\n  }\n\n  getPluginId(): string {\n    return this.configurationHandler.getPluginId();\n  }\n\n  getIcon(): string {\n    return this.configurationHandler.getIcon() || 'fa-question-circle-o';\n  }\n\n  getContainer(): string {\n    return this.configurationHandler.isAppendToBody() ? 'body' : '';\n  }\n}\n","export class HelpConstants {\n  public static readonly MESSAGE_COMING_SOON = 'Contextual help is coming soon.';\n}\n","import { Component, OnInit, Input, ViewChild, TemplateRef } from '@angular/core';\nimport { Helper, Link } from 'edc-client-js';\nimport { HelpService } from './help.service';\nimport { HelpConstants } from './help.constants';\nimport { PopoverDirective } from 'ngx-bootstrap';\n\n@Component({\n  selector: 'edc-help',\n  styleUrls: [ 'help.less' ],\n  template: `\n    <!-- Popover template -->\n    <ng-template #popTemplate>\n      <div class=\"edc-popover-container\" (click)=\"$event.stopPropagation()\">\n        <article class=\"popover-article\">{{ helper?.description }}</article>\n        <div class=\"see-also\">\n          <div *ngIf=\"helper?.articles.length\">\n            <h6><strong><span>Need more...</span></strong></h6>\n            <ul class=\"list-unstyled see-also-list\">\n              <li *ngFor=\"let article of helper.articles; let key = index\" class=\"see-also-item\"\n                  (click)=\"goToArticle(key)\">\n                <div class=\"article-link\">-{{article.label}}</div>\n              </li>\n            </ul>\n          </div>\n          <div *ngIf=\"helper?.links.length\">\n            <h6><strong><span>Related Topics</span></strong></h6>\n            <ul class=\"list-unstyled see-also-list\">\n              <li *ngFor=\"let link of helper.links\" class=\"see-also-item\" (click)=\"goToLink(link)\">\n                <div class=\"article-link\">-{{link.label}}</div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n\n\n    <!-- app-help template -->\n    <i class=\"fa help-icon {{ iconCss }}\"\n    [popover]=\"helper ? popTemplate : comingSoon\"\n    [popoverTitle]=\"helper?.label\"\n    [placement]=\"getPlacement()\"\n    [ngClass]=\"{'on-dark': dark }\"\n    [container]=\"container\"\n    [outsideClick]=\"true\"\n    (click)=\"cancelClick($event)\">\n    </i>\n  `\n})\nexport class HelpComponent implements OnInit {\n  helper: Helper;\n  container: string;\n  iconCss: string;\n  comingSoon = HelpConstants.MESSAGE_COMING_SOON;\n\n  @Input() pluginId: string; // if defined, the plugin identifier to use for fetching help content\n  @Input() key: string;\n  @Input() subKey: string;\n  @Input() placement = 'bottom';\n  @Input() dark: boolean;\n\n  constructor(private helpService: HelpService) {}\n\n  ngOnInit(): void {\n    if (this.key && this.subKey) {\n      setTimeout(() => { // set timeout because popover content loading is not top priority.\n        this.helpService.getHelp(this.key, this.subKey, this.pluginId)\n          .then((helper: Helper) => this.helper = helper,\n            (err) => console.warn('Contextual Help not found : ', err));\n      }, 2000);\n    }\n    this.iconCss = this.helpService.getIcon();\n    this.container = this.helpService.getContainer();\n  }\n\n  goToArticle(index: number): void {\n    const basePath = this.helpService.getHelpPath();\n    const pluginId = this.pluginId || this.helpService.getPluginId();\n    let url = `${basePath}/context/`;\n    if (pluginId) {\n      url += `${pluginId}/`;\n    } else {\n      console.warn('Please check if plugin Id was correctly set in the edc-popover-ng configuration handler');\n    }\n    url += `${this.key}/${this.subKey}/en/${index}`;\n    this.open(url);\n  }\n\n  goToLink(link: Link): void {\n    const basePath = this.helpService.getHelpPath();\n    const url = `${basePath}/doc/${link.id}`;\n    this.open(url);\n  }\n\n  getPlacement(): string {\n    return this.placement;\n  }\n\n  cancelClick($event: Event): void {\n    $event.preventDefault();\n  }\n\n  private open(url: string): void {\n    window.open(url, 'help', 'scrollbars=1,resizable=1,height=800,width=1200');\n  }\n}\n","import { NgModule, ModuleWithProviders, Provider } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { HelpComponent } from './help.component';\nimport { HelpService } from './help.service';\n\nexport interface HelpModuleConfig {\n  configLoader: Provider;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    PopoverModule.forRoot()\n  ],\n  declarations: [\n    HelpComponent\n  ],\n  providers: [\n    HelpService\n  ],\n  exports: [\n    HelpComponent\n  ],\n  entryComponents: [\n    HelpComponent\n  ]\n})\nexport class HelpModule {\n  static forRoot(config: HelpModuleConfig): ModuleWithProviders {\n    return {\n      ngModule: HelpModule,\n      providers: [\n        HelpService,\n        config.configLoader\n      ]\n    };\n  }\n}\n"],"names":["EdcClient","Injectable","Component","Input","NgModule","CommonModule","PopoverModule"],"mappings":"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"}
